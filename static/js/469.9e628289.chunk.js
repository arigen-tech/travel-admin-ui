"use strict";(self.webpackChunkholidaytravel_admin=self.webpackChunkholidaytravel_admin||[]).push([[469],{469:(e,s,a)=>{a.r(s),a.d(s,{default:()=>i});var t=a(379),l=a(43),r=a(533),n=a(253),c=a(256),o=a(579);const i=()=>{const[e,s]=(0,l.useState)({hotelTypeName:"",noOfStar:""}),[a,i]=(0,l.useState)(!1),[d,m]=(0,l.useState)(""),[h,u]=(0,l.useState)(""),[p,x]=(0,l.useState)(null),[j,y]=(0,l.useState)(!1),[N,g]=(0,l.useState)(1),[b,v]=(0,l.useState)([]),[f,S]=(0,l.useState)(!1),[C,T]=(0,l.useState)(1),[k,w]=(0,l.useState)(""),[A,O]=(0,l.useState)(!1),[H,E]=(0,l.useState)(null),[F,L]=(0,l.useState)(!1),[P,D]=(0,l.useState)(""),q=async()=>{S(!0);try{const e=await(0,n.iq)(r.V1);200===e.status&&Array.isArray(e.response)?(v(e.response),T(Math.ceil(e.response.length/10))):(console.error("Unexpected API response format:",e),v([]),T(1))}catch(e){console.error("Error fetching hotel data:",e)}finally{S(!1)}};(0,l.useEffect)((()=>{q()}),[]),(0,l.useEffect)((()=>{g(1)}),[k]);const M=function(e){u({message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",onClose:()=>{u(null)}})},z=e=>{const{id:a,value:l}=e.target;"search"===a?w(l):s((e=>(0,t.A)((0,t.A)({},e),{},{[a]:l})))},B=(I=b,k.trim()?I.filter((e=>{var s,a;const t=(null===(s=e.hotelTypeName)||void 0===s?void 0:s.toLowerCase())||"",l=String(e.noOfStar||"").toLowerCase(),r=(null===(a=e.status)||void 0===a?void 0:a.toLowerCase())||"";return t.includes(k.toLowerCase())||l.includes(k.toLowerCase())||r.includes(k.toLowerCase())})):I);var I;const _=B.length,R=Math.ceil(_/10),U=10*N,V=U-10,Y=B.slice(V,U);return(0,o.jsxs)("div",{className:"content-wrapper",children:[(0,o.jsx)("div",{className:"row",children:(0,o.jsxs)("div",{className:"col-12 grid-margin stretch-card",children:[h&&(0,o.jsx)(c.A,{message:h.message,type:h.type,onClose:h.onClose}),(0,o.jsxs)("div",{className:"card form-card",children:[(0,o.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-center",children:[(0,o.jsx)("h4",{className:"card-title",children:"Hotel Type"}),(0,o.jsx)("div",{children:j?(0,o.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:()=>y(!1),children:[(0,o.jsx)("i",{className:"mdi mdi-arrow-left"})," Back"]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("form",{className:"d-inline-block serachform",role:"search",children:(0,o.jsxs)("div",{className:"input-group searchinput",children:[(0,o.jsx)("input",{type:"search",className:"form-control",placeholder:"Search","aria-label":"Search","aria-describedby":"search-icon",id:"search",value:k,onChange:z}),(0,o.jsx)("span",{className:"input-group-text",id:"search-icon",children:(0,o.jsx)("i",{className:"mdi mdi-magnify"})})]})}),(0,o.jsxs)("button",{type:"button",className:"btn btn-success me-2",onClick:()=>y(!0),children:[(0,o.jsx)("i",{className:"mdi mdi-plus"})," Create"]}),(0,o.jsxs)("button",{type:"button",className:"btn btn-warning me-2",children:[(0,o.jsx)("i",{className:"mdi mdi-restore"})," Refresh"]})]})})]}),(0,o.jsx)("div",{className:"card-body",children:j?(0,o.jsx)(o.Fragment,{children:j&&(0,o.jsxs)("form",{className:"forms row",onSubmit:a?async a=>{a.preventDefault();try{const a=await(0,n.zi)("".concat(r.u9,"/").concat(p),e);200===a.status?(M((null===a||void 0===a?void 0:a.message)||"HotelType updated successfully!","success"),q(),y(!1),i(!1),x(null),s({hotelTypeName:"",noOfStar:""})):M((null===a||void 0===a?void 0:a.message)||"Failed to update HotelType. Please try again.","error")}catch(l){var t;console.error("Error updating HotelType:",l),M((null===l||void 0===l||null===(t=l.response)||void 0===t?void 0:t.message)||"An error occurred while updating the HotelType.","error")}}:async a=>{if(a.preventDefault(),e.hotelTypeName&&e.noOfStar){const a={hotelTypeName:e.hotelTypeName,noOfStar:e.noOfStar};try{const e=await(0,n.MB)(r.u9,a);200===e.status?(M(e.message||"HotelType added successfully!","success"),s({hotelTypeName:"",noOfStar:""}),y(!1),q()):M(e.message||"Failed to add HotelType. Please try again.","error")}catch(l){var t;console.error("Error adding HotelType:",l),M((null===(t=l.response)||void 0===t?void 0:t.message)||"An error occurred while adding the HotelType.","error")}}else alert("Please fill out all required fields.")},children:[(0,o.jsxs)("div",{className:"form-group col-md-4",children:[(0,o.jsxs)("label",{htmlFor:"hotelTypeName",children:["Hotel Type Name ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)("input",{type:"text",required:!0,className:"form-control",id:"hotelTypeName",placeholder:"Hotel Type Name",onChange:z,value:e.hotelTypeName})]}),(0,o.jsxs)("div",{className:"form-group col-md-4",children:[(0,o.jsxs)("label",{children:["No. Of Star ",(0,o.jsx)("span",{className:"text-danger ",children:"*"})]}),(0,o.jsx)("input",{type:"text",required:!0,className:"form-control",id:"noOfStar",placeholder:"No. of Star",onChange:z,value:e.noOfStar})]}),(0,o.jsxs)("div",{className:"form-group col-md-12 d-flex justify-content-end",children:[(0,o.jsx)("button",{type:"submit",className:"btn btn-primary me-2",disabled:!e.hotelTypeName,children:a?"Save Changes":"Submit"}),(0,o.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>y(!1),children:"Cancel"})]})]})}):(0,o.jsxs)(o.Fragment,{children:[f?(0,o.jsx)("div",{children:"Loading..."}):(0,o.jsx)("div",{className:"table-responsive packagelist",children:(0,o.jsxs)("table",{className:"table table-bordered table-hover align-middle",children:[(0,o.jsx)("thead",{className:"table-light",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Sr. No."}),(0,o.jsx)("th",{children:"Name"}),(0,o.jsx)("th",{children:"Description"}),(0,o.jsx)("th",{children:"Edit"}),(0,o.jsx)("th",{children:"Status"})]})}),(0,o.jsx)("tbody",{children:Y.length>0?Y.map(((e,a)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:V+a+1}),(0,o.jsx)("td",{children:e.hotelTypeName}),(0,o.jsx)("td",{children:e.noOfStar}),(0,o.jsx)("td",{children:(0,o.jsx)("button",{className:"btn btn-sm btn-success me-2 ".concat("n"===e.status?"disabled":""),disabled:"n"===e.status,onClick:()=>{"y"===e.status&&(e=>{s({hotelTypeName:e.hotelTypeName,noOfStar:e.noOfStar}),x(e.id),i(!0),y(!0)})(e)},children:(0,o.jsx)("i",{className:"mdi mdi-square-edit-outline"})})}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"form-check form-switch",children:[(0,o.jsx)("input",{className:"form-check-input",type:"checkbox",checked:"y"===e.status,onChange:()=>{return s=e.id,a="y"!==e.status,t=e.hotelTypeName,E(s),L(a),D(t),void O(!0);var s,a,t}}),(0,o.jsx)("label",{className:"form-check-label px-0",children:"y"===e.status?"Active":"Deactivated"})]})})]},e.id))):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"5",className:"text-center",children:"No matching records found."})})})]})}),(0,o.jsxs)("nav",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,o.jsx)("div",{children:(0,o.jsxs)("span",{children:["Page ",N," of ",C," | Total Products:"," ",b.length]})}),(0,o.jsxs)("ul",{className:"pagination mb-0",children:[(0,o.jsx)("li",{className:"page-item ".concat(1===N?"disabled":""),children:(0,o.jsx)("button",{className:"page-link",onClick:()=>{N>1&&g(N-1)},children:"\xab"})}),[...Array(C)].map(((e,s)=>(0,o.jsx)("li",{className:"page-item ".concat(N===s+1?"active":""),children:(0,o.jsx)("button",{className:"page-link",onClick:()=>g(s+1),children:s+1})},s))),(0,o.jsx)("li",{className:"page-item ".concat(N===C?"disabled":""),children:(0,o.jsx)("button",{className:"page-link",onClick:()=>{N<R&&g(N+1)},children:"\xbb"})})]})]})]})})]})]})}),A&&(0,o.jsx)("div",{className:"modal d-block",tabIndex:"-1",role:"dialog",children:(0,o.jsx)("div",{className:"modal-dialog",role:"document",children:(0,o.jsxs)("div",{className:"modal-content",children:[(0,o.jsx)("div",{className:"modal-header",children:(0,o.jsx)("h5",{className:"modal-title",children:"Confirm Status Change"})}),(0,o.jsx)("div",{className:"modal-body",children:(0,o.jsxs)("p",{className:"text-lg mb-4 text-center",children:["Are you sure you want to"," ",(0,o.jsx)("strong",{children:F?"Activate":"Deactivate"})," To"," ",(0,o.jsx)("strong",{children:P})," ?"]})}),(0,o.jsxs)("div",{className:"modal-footer",children:[(0,o.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>O(!1),children:"No"}),(0,o.jsx)("button",{type:"button",className:"btn btn-primary",onClick:async e=>{e.preventDefault();try{const e=F?"y":"n",s=await(0,n.zi)("".concat(r.u9,"/status/").concat(H,"?status=").concat(e));200===s.status?(M(s.message||"Status updated successfully!","success"),q(),O(!1),E(null),L(!1)):M((null===s||void 0===s?void 0:s.message)||"Failed to update status. Please try again.","error")}catch(a){var s;console.error("Error updating status:",a),M((null===a||void 0===a||null===(s=a.response)||void 0===s?void 0:s.message)||"An error occurred while updating the status.","error")}},children:"Yes"})]})]})})})]})}}}]);
//# sourceMappingURL=469.9e628289.chunk.js.map