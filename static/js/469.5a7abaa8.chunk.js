"use strict";(self.webpackChunkholidaytravel_admin=self.webpackChunkholidaytravel_admin||[]).push([[469],{469:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=s(379),l=s(43),n=s(533),r=s(253),i=s(579);const c=()=>{const[e,t]=(0,l.useState)({hotelType:"",description:"",status:"y"}),[s,c]=(0,l.useState)(!1),[o,d]=(0,l.useState)(1),[m,h]=(0,l.useState)(-1),[p,u]=(0,l.useState)(null),[y,x]=(0,l.useState)([]),[j,b]=(0,l.useState)(!1),[N,g]=(0,l.useState)(1),f=async()=>{b(!0);try{const e=await(0,r.iq)(n.V1);200===e.status&&Array.isArray(e.response)?(x(e.response),g(Math.ceil(e.response.length/10))):(console.error("Unexpected API response format:",e),x([]),g(1))}catch(e){console.error("Error fetching hotel data:",e)}finally{b(!1)}};(0,l.useEffect)((()=>{f()}),[]);const v=e=>{const{name:s,value:l}=e.target;t((e=>(0,a.A)((0,a.A)({},e),{},{[s]:l})))},S=y.slice(10*(o-1),10*o);return(0,i.jsx)("div",{className:"content-wrapper",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-12 grid-margin stretch-card",children:(0,i.jsxs)("div",{className:"card form-card",children:[(0,i.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-center",children:[(0,i.jsx)("h4",{className:"card-title",children:"Hotel Type"}),(0,i.jsx)("div",{children:s?(0,i.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(!1),children:[(0,i.jsx)("i",{className:"mdi mdi-arrow-left"})," Back"]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("button",{type:"button",className:"btn btn-success me-2",onClick:()=>c(!0),children:[(0,i.jsx)("i",{className:"mdi mdi-plus"})," Create"]}),(0,i.jsxs)("button",{type:"button",className:"btn btn-warning me-2",onClick:f,children:[(0,i.jsx)("i",{className:"mdi mdi-restore"})," Refresh"]})]})})]}),(0,i.jsx)("div",{className:"card-body",children:s?(0,i.jsxs)("form",{className:"forms row",onSubmit:async s=>{if(s.preventDefault(),e.hotelType&&e.description){const s={hotelTypeName:e.hotelType,description:e.description,status:e.status,createDt:(new Date).toISOString(),createdBy:"system",updatedDt:(new Date).toISOString()};try{200===(await(0,r.MB)(n.zW,s)).status?(alert("Hotel type added successfully!"),t({hotelType:"",description:"",status:"y"}),c(!1),f()):alert("Failed to add hotel type. Please try again.")}catch(a){console.error("Error adding hotel type:",a),alert("An error occurred while adding hotel type.")}}else alert("Please fill out all required fields.")},children:[(0,i.jsxs)("div",{className:"form-group col-md-12",children:[(0,i.jsx)("label",{children:"Hotel Type"}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"hotelType",placeholder:"Enter Hotel Type",value:e.hotelType,onChange:v,required:!0})]}),(0,i.jsxs)("div",{className:"form-group col-md-12",children:[(0,i.jsx)("label",{children:"No. Of Star"}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"description",placeholder:"No. Of Star ",value:e.description,onChange:v,required:!0})]}),(0,i.jsxs)("div",{className:"form-group col-md-12 d-flex justify-content-end",children:[(0,i.jsx)("button",{type:"submit",className:"btn btn-primary me-2",children:"Submit"}),(0,i.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>c(!1),children:"Cancel"})]})]}):(0,i.jsxs)(i.Fragment,{children:[j?(0,i.jsx)("div",{children:"Loading..."}):(0,i.jsx)("div",{className:"table-responsive packagelist",children:(0,i.jsxs)("table",{className:"table table-bordered table-hover align-middle",children:[(0,i.jsx)("thead",{className:"table-light",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"S.No."}),(0,i.jsx)("th",{children:"Hotel Type"}),(0,i.jsx)("th",{children:"Description"}),(0,i.jsx)("th",{children:"Action"})]})}),(0,i.jsx)("tbody",{children:S.length>0?S.map(((e,t)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:10*(o-1)+t+1}),(0,i.jsx)("td",{children:m===e.id?(0,i.jsx)("input",{type:"text",className:"form-control",value:e.hotelTypeName,onChange:t=>x((s=>s.map((s=>s.id===e.id?(0,a.A)((0,a.A)({},s),{},{hotelTypeName:t.target.value}):s))))}):e.hotelTypeName}),(0,i.jsx)("td",{children:m===e.id?(0,i.jsx)("input",{type:"text",className:"form-control",value:e.description,onChange:t=>x((s=>s.map((s=>s.id===e.id?(0,a.A)((0,a.A)({},s),{},{description:t.target.value}):s))))}):e.description}),(0,i.jsxs)("td",{children:[m===e.id?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>async function(e){if(e.id){try{const t=(0,a.A)((0,a.A)({},y.find((t=>e.id===t.id))),{},{hotelTypeName:e.hotelTypeName,description:e.description,updatedDt:(new Date).toISOString()});200===(await(0,r.zi)("".concat(n.MC,"/").concat(e.id),t)).status?(alert("Hotel type Updated successfully!"),h(-1),f()):alert("Failed to remove hotel type. Please try again.")}catch(t){console.error("Error removing hotel type:",t),alert("An error occurred while removing hotel type.")}console.log(e)}else alert("Invalid hotel type ID.")}(e),children:"Save"}),(0,i.jsx)("button",{className:"btn btn-sm btn-secondary me-2",onClick:()=>{x((e=>e.map((e=>e.id===p.id?p:e)))),h(null)},children:"Cancel"})]}):(0,i.jsx)("button",{className:"btn btn-sm btn-success me-2",onClick:()=>{h(e.id),u((0,a.A)({},e))},children:(0,i.jsx)("i",{className:"mdi mdi-square-edit-outline"})}),(0,i.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>async function(e){if(e)try{const t=(0,a.A)((0,a.A)({},y.find((t=>t.id===e))),{},{status:"n",updatedDt:(new Date).toISOString()});200===(await(0,r.zi)("".concat(n.MC,"/").concat(e),t)).status?(alert("Hotel type removed successfully!"),f()):alert("Failed to remove hotel type. Please try again.")}catch(t){console.error("Error removing hotel type:",t),alert("An error occurred while removing hotel type.")}else alert("Invalid hotel type ID.")}(e.id),children:(0,i.jsx)("i",{className:"mdi mdi-trash-can"})})]})]},t))):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"4",className:"text-center",children:"No Data Available"})})})]})}),(0,i.jsxs)("nav",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("span",{children:["Page ",o," of ",N," | Total Products: ",y.length]})}),(0,i.jsxs)("ul",{className:"pagination mb-0",children:[(0,i.jsx)("li",{className:"page-item ".concat(1===o?"disabled":""),children:(0,i.jsx)("button",{className:"page-link",onClick:()=>{o>1&&d(o-1)},children:"\xab"})}),[...Array(N)].map(((e,t)=>(0,i.jsx)("li",{className:"page-item ".concat(o===t+1?"active":""),children:(0,i.jsx)("button",{className:"page-link",onClick:()=>d(t+1),children:t+1})},t))),(0,i.jsx)("li",{className:"page-item ".concat(o===N?"disabled":""),children:(0,i.jsx)("button",{className:"page-link",onClick:()=>{o<N&&d(o+1)},children:"\xbb"})})]})]})]})})]})})})})}}}]);
//# sourceMappingURL=469.5a7abaa8.chunk.js.map